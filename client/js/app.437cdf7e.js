(function(e){function t(t){for(var n,r,i=t[0],o=t[1],l=t[2],u=0,d=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);p&&p(t);while(d.length)d.shift()();return c.push.apply(c,l||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],n=!0,r=1;r<a.length;r++){var i=a[r];0!==s[i]&&(n=!1)}n&&(c.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},s={app:0},c=[];function i(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-0d9796da":"bcca55c7","chunk-2d0b28bd":"2a346645","chunk-2d0be70b":"d6367bf2","chunk-6a7ae136":"38594f75"}[e]+".js"}function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[],a={"chunk-0d9796da":1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=new Promise((function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-0d9796da":"95b774cb","chunk-2d0b28bd":"31d6cfe0","chunk-2d0be70b":"31d6cfe0","chunk-6a7ae136":"31d6cfe0"}[e]+".css",s=o.p+n,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var l=c[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===s))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===n||u===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||s,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=n,delete r[e],p.parentNode.removeChild(p),a(c)},p.href=s;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){r[e]=0})));var n=s[e];if(0!==n)if(n)t.push(n[2]);else{var c=new Promise((function(t,a){n=s[e]=[t,a]}));t.push(n[2]=c);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=i(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(p);var a=s[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",d.name="ChunkLoadError",d.type=n,d.request=r,a[1](d)}s[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u;c.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"445a":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("7a23"),r={id:"nav",class:"app"};function s(e,t,a,s,c,i){var o=Object(n["y"])("Header"),l=Object(n["y"])("router-view");return Object(n["r"])(),Object(n["e"])("div",r,[Object(n["h"])(o,{onSetting:i.settingView},null,8,["onSetting"]),Object(n["h"])(l,{onSend_new_message:i.sendMessage,"settings-view":c.settingsView,"user-data":c.userData,"chat-list":c.chatList,"websocket-message":c.webSocketMessages},null,8,["onSend_new_message","settings-view","user-data","chat-list","websocket-message"])])}var c=a("1da1"),i=(a("96cf"),a("d3b7"),a("ddb0"),a("e9c4"),{key:0,class:"header"}),o=Object(n["f"])("svg",{viewBox:"0 0 513 513",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[Object(n["f"])("path",{d:"M256.025.05C117.67-2.678 3.184 107.038.025 245.383a240.703 240.703 0 0085.333 182.613v73.387c0 5.891 4.776 10.667 10.667 10.667a10.67 10.67 0 005.653-1.621l59.456-37.141a264.142 264.142 0 0094.891 17.429c138.355 2.728 252.841-106.988 256-245.333C508.866 107.038 394.38-2.678 256.025.05z"}),Object(n["f"])("path",{d:"M330.518 131.099l-213.825 130.08c-7.387 4.494-5.74 15.711 2.656 17.97l72.009 19.374a9.88 9.88 0 007.703-1.094l32.882-20.003-10.113 37.136a9.88 9.88 0 001.083 7.704l38.561 63.826c4.488 7.427 15.726 5.936 18.003-2.425l65.764-241.49c2.337-8.582-7.092-15.72-14.723-11.078zM266.44 356.177l-24.415-40.411 15.544-57.074c2.336-8.581-7.093-15.719-14.723-11.078l-50.536 30.744-45.592-12.266L319.616 160.91 266.44 356.177z",fill:"#fff"})],-1),l={class:"user-settings"},u=["src"];function d(e,t,a,r,s,c){var d=Object(n["y"])("router-link");return c.visibleComponent?(Object(n["r"])(),Object(n["e"])("div",i,[Object(n["h"])(d,{to:"/",class:"logo"},{default:Object(n["E"])((function(){return[o]})),_:1}),Object(n["f"])("div",l,[Object(n["f"])("div",{onClick:t[0]||(t[0]=function(){return c.settingView&&c.settingView.apply(c,arguments)}),to:"/about"},[s.profilepic?(Object(n["r"])(),Object(n["e"])("img",{key:0,class:"user-profile account-profile",src:"https://diplom-api.na4u.ru/uploads/"+s.profilepic,alt:""},null,8,u)):Object(n["d"])("",!0)])])])):Object(n["d"])("",!0)}a("ac1f"),a("1276");var p={name:"Header",data:function(){return{settings:!1,profilepic:""}},beforeCreate:function(){var e=this;if(localStorage.getItem("token")){var t=new Headers;t.append("Authorization",localStorage.getItem("token"));var a={method:"GET",redirect:"follow",headers:t};fetch("https://diplom-api.na4u.ru/api/me",a).then((function(e){return e.json()})).then((function(t){t.values[0].profile_picture?e.profilepic=t.values[0].profile_picture.split("/").pop():e.profilepic="auto.jpg"})).catch((function(e){return console.log("error",e)}))}},computed:{visibleComponent:function(){return"/auth"!=this.$route.path&&"/register"!=this.$route.path}},methods:{settingView:function(){this.settings=!this.settings,this.$emit("setting",{settingView:this.settings})}}},h=a("6b0d"),g=a.n(h);const m=g()(p,[["render",d]]);var f=m,b={components:{Header:f},data:function(){return{settingsView:!1,ws:"",user_id:!0,webSocketMessages:[],userData:{},chatList:[]}},beforeCreate:function(){var e=this;localStorage.getItem("token")||"/register"==location.pathname||this.$router.push({path:"/auth"});var t=new Headers;t.append("Authorization",localStorage.getItem("token"));var a={method:"GET",redirect:"follow",headers:t};fetch("https://diplom-api.na4u.ru/api/me",a).then((function(e){return e.json()})).then((function(t){console.log(t),e.userData=t.values[0],localStorage.setItem("uid",t.values[0].id)})).catch((function(e){return console.log("error",e)})),fetch("https://diplom-api.na4u.ru/api/chat/get",{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(t){if(t.values.message)e.chatList=!1;else{var a=t.values;e.chatList=a,console.log(e.chatList)}})).catch((function(e){return console.log("error",e)}))},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.ws=new WebSocket("wss://websocketchat.na4u.ru"),e.ws.onopen=function(){console.log("[WS] - Connected.")},e.ws.onmessage=function(t){var a=JSON.parse(t.data),n={text:a.message,from_user_id:a.user_id,chat_id:a.chat_id};Object.prototype.hasOwnProperty.call(a,"image")&&(n["image"]=a.image),e.webSocketMessages.push(n),document.getElementsByClassName("chat-area")[0].scrollTop=999*document.getElementsByClassName("chat-area-main")[0].scrollHeight,setTimeout((function(){return document.getElementsByClassName("chat-area")[0].scrollTop=999*document.getElementsByClassName("chat-area-main")[0].scrollHeight}),500)};case 3:case"end":return t.stop()}}),t)})))()},methods:{settingView:function(e){this.settingsView=e.settingView},sendMessage:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a={message:t.message,user_id:t.user_id,chat_id:t.chat_id},Object.prototype.hasOwnProperty.call(t,"image")&&(a["image"]=t.image),this.ws.send(JSON.stringify(a)),document.getElementsByClassName("chat-area")[0].scrollTop=999*document.getElementsByClassName("chat-area-main")[0].scrollHeight,setTimeout((function(){return document.getElementsByClassName("chat-area")[0].scrollTop=999*document.getElementsByClassName("chat-area-main")[0].scrollHeight}),100);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}};a("e29e");const O=g()(b,[["render",s]]);var j=O,v=(a("3ca3"),a("6c02")),w={key:0,class:"wrapper"},y={key:0,class:"empty"},k=["onClick"],_=["src"],S={key:1,class:"msg-profile",src:"https://diplom-api.na4u.ru/uploads/auto.jpg",alt:""},C={class:"msg-detail"},I={class:"msg-username"},x=Object(n["f"])("div",{class:"msg-content"},[Object(n["f"])("span",{class:"msg-message"},"Зайти в чат")],-1),L={key:1,class:"answ"},M=Object(n["f"])("p",{style:{"margin-top":"36px"}},"У вас нет активных чатов",-1),E=[M],N=Object(n["f"])("div",{class:"overlay"},null,-1),A={class:"chat-area"},T={key:0,class:"chat-area-header"},V={key:0,class:"chat-area-title"},P={key:1,class:"chat-area-title"},B={key:2,class:"chat-area-group"},D=["src"],F={key:1,class:"chat-area-profile",src:"https://diplom-api.na4u.ru/uploads/auto.jpg",alt:""},H={class:"chat-area-main"},$={key:0,class:"chat-msg"},J={class:"chat-msg-content"},z={class:"chat-msg-text"},R=["src"],G={key:1,class:"chat-msg owner"},U={class:"chat-msg-content"},Z={class:"chat-msg-text"},q=["src"],W={key:0},K={key:0,class:"chat-msg"},Q={class:"chat-msg-content"},X={class:"chat-msg-text"},Y=["src"],ee={key:1,class:"chat-msg owner"},te={class:"chat-msg-content"},ae={class:"chat-msg-text"},ne=["src"],re={key:1,class:"chat-area-footer"},se={key:0,class:"preview_image"},ce=["src"],ie=Object(n["f"])("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"},null,-1),oe=[ie],le=Object(n["f"])("path",{d:"M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"},null,-1),ue=[le],de={key:0,class:"detail-area"},pe={class:"profile_image"},he=Object(n["f"])("p",null,"✎",-1),ge=[he],me=["src"],fe=Object(n["f"])("hr",null,null,-1);function be(e,t,a,r,s,c){var i=Object(n["y"])("router-link");return s.renderComponent?(Object(n["r"])(),Object(n["e"])("div",w,[Object(n["f"])("div",{class:Object(n["n"])(["conversation-area",{active:s.mobileList}])},[s.chatList?(Object(n["r"])(),Object(n["e"])("div",y,[(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["x"])(s.chatList,(function(e){return Object(n["r"])(),Object(n["e"])("div",{onClick:function(t){return c.openChat(e.id)},key:e.id,class:"msg active"},[e.interlocutor.profile_picture?(Object(n["r"])(),Object(n["e"])("img",{key:0,class:"msg-profile",src:"https://diplom-api.na4u.ru/uploads/"+e.interlocutor.profile_picture.split("/").pop(),alt:""},null,8,_)):(Object(n["r"])(),Object(n["e"])("img",S)),Object(n["f"])("div",C,[Object(n["f"])("div",I,Object(n["A"])(e.interlocutor.login),1),x])],8,k)})),128))])):(Object(n["r"])(),Object(n["e"])("div",L,E)),Object(n["h"])(i,{to:"/search",class:"add"}),N],2),Object(n["f"])("div",A,[s.chatList?(Object(n["r"])(),Object(n["e"])("div",T,[Object(n["f"])("div",{class:"swipe-chats",onClick:t[0]||(t[0]=function(e){return c.viewMobileList(a.settingsView)})},Object(n["A"])(s.mobileListMessage),1),s.chatId?(Object(n["r"])(),Object(n["e"])("div",V,Object(n["A"])(s.currentInterlocutor.login),1)):(Object(n["r"])(),Object(n["e"])("div",P,"Перейдите в список ваших чатов")),s.chatId?(Object(n["r"])(),Object(n["e"])("div",B,[s.currentInterlocutor.profile_picture?(Object(n["r"])(),Object(n["e"])("img",{key:0,class:"chat-area-profile",src:"https://diplom-api.na4u.ru/uploads/"+s.currentInterlocutor.profile_picture.split("/").pop(),alt:""},null,8,D)):(Object(n["r"])(),Object(n["e"])("img",F))])):Object(n["d"])("",!0)])):Object(n["d"])("",!0),Object(n["f"])("div",H,[(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["x"])(s.chatMessage,(function(e){return Object(n["r"])(),Object(n["e"])("div",{key:e.id},[e.from_user_id!=s.user_id?(Object(n["r"])(),Object(n["e"])("div",$,[Object(n["f"])("div",J,[Object(n["f"])("div",z,[JSON.parse(e.text).image?(Object(n["r"])(),Object(n["e"])("img",{key:0,class:"chat-msg-image",src:"https://diplom-api.na4u.ru/uploads/"+JSON.parse(e.text).image.split("/").pop(),alt:""},null,8,R)):Object(n["d"])("",!0),Object(n["f"])("p",null,Object(n["A"])(JSON.parse(e.text).message),1)])])])):(Object(n["r"])(),Object(n["e"])("div",G,[Object(n["f"])("div",U,[Object(n["f"])("div",Z,[JSON.parse(e.text).image?(Object(n["r"])(),Object(n["e"])("img",{key:0,class:"chat-msg-image",src:"https://diplom-api.na4u.ru/uploads/"+JSON.parse(e.text).image.split("/").pop(),alt:""},null,8,q)):Object(n["d"])("",!0),Object(n["f"])("p",null,Object(n["A"])(JSON.parse(e.text).message),1)])])]))])})),128)),(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["x"])(a.websocketMessage,(function(e){return Object(n["r"])(),Object(n["e"])("div",{key:e.id},[e.chat_id===s.chat?(Object(n["r"])(),Object(n["e"])("div",W,[e.from_user_id!==s.user_id?(Object(n["r"])(),Object(n["e"])("div",K,[Object(n["f"])("div",Q,[Object(n["f"])("div",X,[e.image?(Object(n["r"])(),Object(n["e"])("img",{key:0,class:"chat-msg-image",src:"https://diplom-api.na4u.ru/uploads/"+e.image.split("/").pop(),alt:""},null,8,Y)):Object(n["d"])("",!0),Object(n["f"])("p",null,Object(n["A"])(e.text),1)])])])):Object(n["d"])("",!0),e.from_user_id===s.user_id?(Object(n["r"])(),Object(n["e"])("div",ee,[Object(n["f"])("div",te,[Object(n["f"])("div",ae,[e.image?(Object(n["r"])(),Object(n["e"])("img",{key:0,class:"chat-msg-image",src:"https://diplom-api.na4u.ru/uploads/"+e.image.split("/").pop(),alt:""},null,8,ne)):Object(n["d"])("",!0),Object(n["f"])("p",null,Object(n["A"])(e.text),1)])])])):Object(n["d"])("",!0)])):Object(n["d"])("",!0)])})),128))]),s.chatId?(Object(n["r"])(),Object(n["e"])("div",re,[s.preview_url?(Object(n["r"])(),Object(n["e"])("div",se,[Object(n["f"])("div",{class:"close",onClick:t[1]||(t[1]=function(){return c.deleteImage&&c.deleteImage.apply(c,arguments)})},"✘"),Object(n["f"])("img",{src:s.preview_url,alt:""},null,8,ce)])):Object(n["d"])("",!0),Object(n["f"])("input",{onChange:t[2]||(t[2]=function(){return c.previewImage&&c.previewImage.apply(c,arguments)}),type:"file",d:"upload",ref:"imageFile",hidden:"",style:{display:"none"}},null,544),(Object(n["r"])(),Object(n["e"])("svg",{onClick:t[3]||(t[3]=function(t){return e.$refs.imageFile.click()}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-paperclip"},oe)),Object(n["F"])(Object(n["f"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return s.message=e}),type:"text",placeholder:"Напишите сообщение..."},null,512),[[n["C"],s.message]]),(Object(n["r"])(),Object(n["e"])("svg",{onClick:t[5]||(t[5]=function(){return c.sendNewMessage&&c.sendNewMessage.apply(c,arguments)}),xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"#0086ff",class:"bi bi-send",viewBox:"0 0 16 16"},ue))])):Object(n["d"])("",!0)]),a.settingsView&&s.settingsViewDetail?(Object(n["r"])(),Object(n["e"])("div",de,[Object(n["f"])("input",{onChange:t[6]||(t[6]=function(e){return c.onFileUpload(e)}),type:"file",d:"upload",ref:"theFile",hidden:"",style:{display:"none"}},null,544),Object(n["f"])("div",pe,[Object(n["f"])("div",{class:"image_bg",onClick:t[7]||(t[7]=function(t){return e.$refs.theFile.click()})},ge),s.profilepic?(Object(n["r"])(),Object(n["e"])("img",{key:0,class:"profile_image",src:"https://diplom-api.na4u.ru/uploads/"+s.profilepic,alt:""},null,8,me)):Object(n["d"])("",!0)]),Object(n["f"])("h2",null,Object(n["A"])(s.userData.login),1),fe,Object(n["f"])("h5",null,Object(n["A"])(s.userData.phone),1),Object(n["f"])("button",{class:"logout",onClick:t[8]||(t[8]=function(){return c.logout&&c.logout.apply(c,arguments)})},"Выйти")])):Object(n["d"])("",!0)])):Object(n["d"])("",!0)}a("7db0"),a("b0c0");var Oe={props:["settingsView","ws","websocketMessage"],created:function(){var e=this;window.addEventListener("keydown",(function(t){"Enter"==t.key&&e.sendNewMessage()}))},data:function(){return{chatId:localStorage.getItem("chat_id"),renderComponent:!0,settingsViewDetail:!0,mobileList:!1,mobileListMessage:"←",currentInterlocutor:{},chatList:[],userData:[],profilepic:"",user_id:localStorage.getItem("uid"),chatMessage:{},chat:"",message:"",file:"",preview_url:""}},beforeCreate:function(){var e=this,t=new Headers;t.append("Authorization",localStorage.getItem("token")),fetch("https://diplom-api.na4u.ru/api/chat/get",{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(t){if(t.values.message)e.chatList=!1;else{var a=t.values;e.chatList=a,e.currentInterlocutor=a.find((function(e){return e["id"]==localStorage.getItem("chat_id")})).interlocutor}})).catch((function(e){return console.log("error",e)}));var a={method:"GET",redirect:"follow",headers:t};fetch("https://diplom-api.na4u.ru/api/me",a).then((function(e){return e.json()})).then((function(t){e.userData=t.values[0],t.values[0].profile_picture?e.profilepic=t.values[0].profile_picture.split("/").pop():e.profilepic="auto.jpg"})).catch((function(e){return console.log("error",e)}))},mounted:function(){var e=this;localStorage.getItem("chat_id")&&(this.chat=localStorage.getItem("chat_id"));var t=new Headers;t.append("Authorization",localStorage.getItem("token"));var a={method:"GET",headers:t};localStorage.getItem("chat_id")&&fetch("https://diplom-api.na4u.ru/api/chat/messages?id=".concat(localStorage.getItem("chat_id")),a).then((function(e){return e.json()})).then((function(t){console.log(t),t.values&&(e.chatMessage=t.values)})).catch((function(e){return console.log("error",e)})),setTimeout((function(){return document.getElementsByClassName("chat-area")[0].scrollTop=999*document.getElementsByClassName("chat-area-main")[0].scrollHeight}),500)},methods:{deleteImage:function(){this.$refs.imageFile.value=null,this.preview_url=""},previewImage:function(e){console.log(e.target.files),this.isUpload=!0;var t=e.target.files[0],a="",n=new FileReader;n.readAsDataURL(t);var r=this;n.onload=function(){a=this.result.substring(this.result.indexOf(",")+1),r.preview_url="data:image/png;base64,"+a}},viewMobileList:function(e){this.mobileList=!this.mobileList,this.mobileList?(this.settingsViewDetail=!1,this.mobileListMessage="✘"):(this.settingsViewDetail=!0,this.mobileListMessage="←")},logout:function(){localStorage.removeItem("uid"),localStorage.removeItem("token"),localStorage.removeItem("chat_id"),location.reload()},sendNewMessage:function(){var e=this;this.preview_url="";var t={message:this.message,user_id:localStorage.getItem("uid"),chat_id:localStorage.getItem("chat_id")},a=this.$refs.imageFile.files[0];if(a){var n=new Headers;n.append("Authorization",localStorage.getItem("token"));var r=new FormData;r.append("image",a,a.name);var s={method:"POST",headers:n,body:r,redirect:"follow"};fetch("https://diplom-api.na4u.ru/api/chat/imageappend",s).then((function(e){return e.json()})).then((function(a){Object.prototype.hasOwnProperty.call(a.values,"imgpath")?(t["image"]=a.values.imgpath,e.$emit("send_new_message",t)):e.message&&e.$emit("send_new_message",t)})).catch((function(e){return console.log("error",e)}))}else this.message&&this.$emit("send_new_message",t);console.log(this.websocketMessage),this.message="",this.$refs.imageFile.value=null},openChat:function(e){this.message="",this.chat=e,localStorage.setItem("chat_id",this.chat),location.reload()},onFileUpload:function(){var e=new Headers;e.append("Authorization",localStorage.getItem("token"));var t=new FormData;t.append("image",this.$refs.theFile.files[0],this.$refs.theFile.files[0].name);var a={method:"POST",headers:e,body:t,redirect:"follow"};fetch("https://diplom-api.na4u.ru/api/profile/image",a).then((function(e){return e.json()})).then((function(e){console.log(e),location.reload()})).catch((function(e){return console.log("error",e)}))}}};const je=g()(Oe,[["render",be]]);var ve=je,we=[{path:"/",name:"Home",component:ve},{path:"/search",name:"Search",component:function(){return a.e("chunk-0d9796da").then(a.bind(null,"2d3b"))}},{path:"/auth",name:"Auth",component:function(){return Promise.all([a.e("chunk-2d0b28bd"),a.e("chunk-2d0be70b")]).then(a.bind(null,"2fef"))}},{path:"/register",name:"Reg",component:function(){return Promise.all([a.e("chunk-2d0b28bd"),a.e("chunk-6a7ae136")]).then(a.bind(null,"b8b8"))}}],ye=Object(v["a"])({history:Object(v["b"])("/"),routes:we}),ke=ye;Object(n["c"])(j).use(ke).mount("#app")},e29e:function(e,t,a){"use strict";a("445a")}});
//# sourceMappingURL=app.437cdf7e.js.map