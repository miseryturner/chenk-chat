{"version":3,"sources":["webpack:///./src/views/Auth.vue","webpack:///./src/views/Auth.vue?72a0"],"names":["class","_createElementVNode","id","_createElementBlock","_hoisted_3","type","ref","dontTrue","$data","phone","$event","placeholder","dontPass","password","_createVNode","_component_router_link","to","href","onClick","$options","_toDisplayString","data","authData","msg","loaderView","mounted","im","inputmask","mask","this","$refs","field","methods","auth","formdata","FormData","append","requestOptions","method","body","redirect","fetch","then","response","json","result","console","log","values","token","localStorage","setItem","$router","push","path","message","catch","error","__exports__","render"],"mappings":"4IACOA,MAAM,Q,GACJA,MAAM,Q,EACTC,eAAuB,UAAnB,kBAAc,G,GAGbD,MAAM,c,iBACkD,e,iBAEvC,W,SAEfE,GAAG,U,SAEMF,MAAM,U,oFAZ1BG,eAgBM,MAhBN,EAgBM,CAfJF,eAcM,MAdN,EAcM,CAbJG,EAaI,eAZJH,eAAqH,SAA9GI,KAAK,OAAOC,IAAI,QAASN,MAAK,gBAAAO,SAAcC,a,qDAAqBA,WAASC,MAAKC,IAAEC,YAAY,kBAApG,iBAAwEH,WAASC,SAY7E,eAXJR,eAA4H,SAArHI,KAAK,WAAYL,MAAK,gBAAAO,SAAcC,WAAQI,SAAYJ,a,qDAAqBA,WAASK,SAAQH,IAAEC,YAAY,UAAnH,iBAAoFH,WAASK,YAC7FZ,eAEM,MAFN,EAEM,CADJa,eAAoFC,EAAA,CAAvEC,GAAG,YAAYhB,MAAM,gBAAgBiB,KAAK,KAAvD,C,wBAA2D,iBAAW,O,QAExEhB,eAGS,UAHAiB,QAAK,8BAAEC,qCAAhB,GAEyBX,+BAAvBL,eAAyC,MAAzC,4BAESK,wBAAXL,eAEM,MAFN,EAEM,CADJF,eAAc,SAAAmB,eAATZ,OAAG,MADV,0B,6CAUS,GACba,KADa,WAEX,MAAO,CACLC,SAAU,CACRT,SAAU,GACVJ,MAAO,IAETc,IAAK,GACLhB,UAAU,EACVK,UAAU,EACVY,YAAY,IAGhBC,QAba,WAeX,IAAIC,EAAK,IAAIC,IAAU,sBACvBD,EAAGE,KAAKC,KAAKC,MAAMC,QAErBC,QAAS,CACPC,KADO,WACA,WAEL,GADAJ,KAAKL,YAAa,EACfK,KAAKP,SAAST,UAAYgB,KAAKP,SAASb,MAAO,CAChD,IAAIyB,EAAW,IAAIC,SACnBD,EAASE,OAAO,WAAYP,KAAKP,SAAST,UAC1CqB,EAASE,OAAO,QAAUP,KAAKP,SAASb,OAExC,IAAI4B,EAAiB,CACnBC,OAAQ,OACRC,KAAML,EACNM,SAAU,UAGZC,MAAM,6CAA8CJ,GAC/CK,MAAK,SAAAC,GAAO,OAAKA,EAASC,UAC1BF,MAAK,SAAAG,GACJC,QAAQC,IAAIF,GACTA,EAAOG,OAAOC,OACfC,aAAaC,QAAQ,QAASN,EAAOG,OAAOC,OAC5C,EAAKG,QAAQC,KAAK,CAAEC,KAAM,OAEE,mBAAzBT,EAAOG,OAAOO,SACf,EAAKhD,UAAW,EAChB,EAAKK,UAAW,EAChB,EAAKY,YAAa,EAClB,EAAKD,IAAMsB,EAAOG,OAAOO,UAEzB,EAAKhC,IAAMsB,EAAOG,OAAOO,QACzB,EAAKhD,UAAW,EAChB,EAAKiB,YAAa,MAIvBgC,OAAM,SAAAC,GAAI,OAAKX,QAAQC,IAAI,QAASU,WAEzC5B,KAAKN,IAAM,wBACXM,KAAKtB,UAAW,EAChBsB,KAAKL,YAAa,K,qBC1E1B,MAAMkC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d0be70b.d6367bf2.js","sourcesContent":["<template>\n  <div class=\"auth\">\n    <div class=\"form\">\n      <h1>Вход в аккаунт</h1>\n      <input type=\"text\" ref=\"field\" :class=\"{ dontTrue: dontTrue }\" v-model=\"authData.phone\" placeholder=\"Номер телефона\">\n      <input type=\"password\" :class=\"{ dontTrue: dontTrue, dontPass: dontPass }\" v-model=\"authData.password\" placeholder=\"Пароль\">\n      <div class=\"form-group\">\n        <router-link to=\"/register\" class=\"form-recovery\" href=\"#\">Регистрация</router-link>\n      </div>\n      <button @click=\"auth\">\n        Войти\n        <div id=\"loader\" v-if=\"loaderView\"></div>\n      </button>\n      <div v-if=\"msg\" class=\"regmsg\">\n        <p>{{msg}}</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport inputmask from 'inputmask';\n\nexport default {\n  data() {\n    return {\n      authData: {\n        password: '',\n        phone: ''\n      },\n      msg: '',\n      dontTrue: false,\n      dontPass: false,\n      loaderView: false\n    }\n  },\n  mounted () {\n    // ... используем\n    var im = new inputmask(\"+7 (999) 999-99-99\");\n    im.mask(this.$refs.field);\n  },\n  methods: {\n    auth() {\n      this.loaderView = true;\n      if(this.authData.password && this.authData.phone) {\n        var formdata = new FormData();\n        formdata.append(\"password\", this.authData.password);\n        formdata.append(\"phone\",  this.authData.phone);\n\n        var requestOptions = {\n          method: 'POST',\n          body: formdata,\n          redirect: 'follow'\n        };\n\n        fetch(\"https://diplom-api.na4u.ru/api/auth/signin\", requestOptions)\n            .then(response => response.json())\n            .then(result => {\n              console.log(result)\n              if(result.values.token) {\n                localStorage.setItem('token', result.values.token)\n                this.$router.push({ path: \"/\" });\n              } else {\n                if(result.values.message == \"Неверный пароль\") {\n                  this.dontTrue = false\n                  this.dontPass = true\n                  this.loaderView = false;\n                  this.msg = result.values.message\n                } else {\n                  this.msg = result.values.message\n                  this.dontTrue = true\n                  this.loaderView = false;\n                }\n              }\n            })\n            .catch(error => console.log('error', error));\n      } else {\n        this.msg = 'Не все поля заполнены'\n        this.dontTrue = true\n        this.loaderView = false;\n      }\n    }\n  }\n}\n</script>\n","import { render } from \"./Auth.vue?vue&type=template&id=2b0f9d4d\"\nimport script from \"./Auth.vue?vue&type=script&lang=js\"\nexport * from \"./Auth.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\mmiza\\\\Desktop\\\\Messenger\\\\Client\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}